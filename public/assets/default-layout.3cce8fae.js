import{u as Y,a as L,_ as B,b as me,c as be,d as ge,l as Z,e as V,R as ye,D as ke,r as xe}from"./index.9b6e4e6b.js";import{F as Ce}from"./index.5aa51626.js";import{b4 as Se,d as T,c as b,i as we,z as h,A as E,D as y,aF as o,aE as r,u as l,C as z,aB as x,aC as M,aH as Q,aG as ee,aK as J,aL as W,aI as S,aY as Fe,bh as te,aX as De,bi as Ee,bj as ne,bk as oe,bc as q,bd as H,bl as ae,e as N,w as se,bm as Me,h as Le,bn as Be,bo as Te,bp as $e,B as ue,b as Re,bq as Ie,o as Ae,br as Pe,be as ze,bs as G,bt as Ne,bu as Ke,aZ as Oe,bv as Ue,bw as je,b5 as We,bx as Ve,by as qe,p as He}from"./arco.f39e6d71.js";import{e as K,g as Je,h as Ge,i as Xe,j as ce,k as Ye}from"./vue.95c2c2eb.js";import"./chart.f8d0b7a6.js";const Ze="/assets/icon-black.c5fc2123.png",Qe="/assets/icon-black.c5fc2123.png";function et(){const t=K(),e=Y();return{logout:async s=>{await e.logout();const c=t.currentRoute.value;Se.success("\u767B\u51FA\u6210\u529F"),t.push({name:s&&typeof s=="string"?s:"login",query:{...t.currentRoute.value.query,redirect:c.name}})}}}const tt=t=>(q("data-v-d33cba47"),t=t(),H(),t),nt={class:"navbar"},ot={class:"left-side"},at={class:"left-side__menu"},st={class:"right-side"},ut=tt(()=>y("span",null," \u9000\u51FA\u767B\u5F55 ",-1)),ct=T({__name:"index",setup(t){const e=L(),i=Y(),s=K(),{logout:c}=et(),{isFullscreen:f,toggle:_}=Je(),v=b(()=>i),F=b(()=>e.theme),p=b(()=>`${(e.menuCollapse?48:e.menuWidth)-40}px`),w=b(()=>e.navBarMenu),a=b(()=>e.headerTabsKey),m=Ge({selector:"body",attribute:"arco-theme",valueDark:"dark",valueLight:"light",storageKey:"arco-theme",onChanged(D){e.toggleTheme(D)}}),g=Xe(m),n=()=>{g()},u=()=>{e.updateSettings({globalSettings:!0})},k=()=>{c()},C=we("toggleDrawerMenu"),d=async D=>{await e.changeHeaderTabsKey(D),await s.push({name:e.serverMenu[0].children?e.serverMenu[0].children[0].name:e.serverMenu[0].name})};return(D,R)=>{const O=S("icon-menu-fold"),I=Fe,U=ae,re=te,le=S("icon-moon-fill"),ie=S("icon-sun-fill"),A=De,j=Ee,de=S("icon-fullscreen-exit"),_e=S("icon-fullscreen"),pe=S("icon-settings"),fe=S("icon-export"),he=ne,ve=oe;return h(),E("div",nt,[y("div",ot,[o(I,null,{default:r(()=>[l(F)!=="dark"?(h(),E("img",{key:0,style:z({width:l(p),minWidth:"160px"}),alt:"logo",src:Ze},null,4)):(h(),E("img",{key:1,style:z({width:l(p),minWidth:"160px"}),alt:"logo",src:Qe},null,4)),l(e).device==="mobile"?(h(),x(O,{key:2,style:{"font-size":"22px",cursor:"pointer"},onClick:l(C)},null,8,["onClick"])):M("",!0)]),_:1}),y("div",at,[o(re,{mode:"horizontal","selected-keys":[l(a)]},{default:r(()=>[(h(!0),E(Q,null,ee(l(w),P=>(h(),x(U,{key:P.name,title:P.title,onClick:Wt=>d(P.name)},{default:r(()=>[J(W(P.title),1)]),_:2},1032,["title","onClick"]))),128))]),_:1},8,["selected-keys"])])]),y("ul",st,[y("li",null,[o(j,{content:l(F)==="light"?"\u70B9\u51FB\u5207\u6362\u4E3A\u6697\u9ED1\u6A21\u5F0F":"\u70B9\u51FB\u5207\u6362\u4E3A\u4EAE\u8272\u6A21\u5F0F"},{default:r(()=>[o(A,{class:"nav-btn",type:"outline",shape:"circle",onClick:n},{icon:r(()=>[l(F)==="dark"?(h(),x(le,{key:0})):(h(),x(ie,{key:1}))]),_:1})]),_:1},8,["content"])]),y("li",null,[o(j,{content:l(f)?"\u70B9\u51FB\u9000\u51FA\u5168\u5C4F\u6A21\u5F0F":"\u70B9\u51FB\u5207\u6362\u5168\u5C4F\u6A21\u5F0F"},{default:r(()=>[o(A,{class:"nav-btn",type:"outline",shape:"circle",onClick:l(_)},{icon:r(()=>[l(f)?(h(),x(de,{key:0})):(h(),x(_e,{key:1}))]),_:1},8,["onClick"])]),_:1},8,["content"])]),y("li",null,[o(j,{content:"\u9875\u9762\u914D\u7F6E"},{default:r(()=>[o(A,{class:"nav-btn",type:"outline",shape:"circle",onClick:u},{icon:r(()=>[o(pe)]),_:1})]),_:1})]),y("li",null,[o(ve,{trigger:"click"},{content:r(()=>[o(he,null,{default:r(()=>[o(I,{onClick:k},{default:r(()=>[o(fe),ut]),_:1})]),_:1})]),default:r(()=>[o(A,{class:"nav-btn nav-btn-name",type:"outline",shape:"round"},{default:r(()=>[J(" \u4F60\u597D\uFF0C"+W(l(v).username?l(v).username:""),1)]),_:1})]),_:1})])])])}}});const rt=B(ct,[["__scopeId","data-v-d33cba47"]]),lt=(t,e)=>{const{target:i="_blank",...s}=e||{};window.open(t,i,Object.entries(s).reduce((c,f)=>{const[_,v]=f;return[...c,`${_}=${v}`]},[]).join(","))},it=new RegExp("^(?!mailto:)(?:(?:http|https|ftp)://)(?:\\S+(?::\\S*)?@)?(?:(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[0-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))|localhost)(?::\\d{2,5})?(?:(/|\\?|#)[^\\s]*)?$","i"),dt=[...me,...be],_t=dt.map(t=>{const{name:e,path:i,meta:s,redirect:c,children:f}=t;return{name:e,path:i,meta:s,redirect:c,children:f}}),pt=_t;function ft(){const t=ge(),e=L(),i=b(()=>e.menuFromServer?e.appAsyncMenus:pt);return{menuTree:b(()=>{const c=JSON.parse(JSON.stringify(i.value));c.sort((_,v)=>(_.meta.order||0)-(v.meta.order||0));function f(_,v){return _?_.map(p=>{var a,m;if(!t.accessRouter(p))return null;if(((a=p.meta)==null?void 0:a.hideChildrenInMenu)||!p.children)return p.children=[],p;p.children=p.children.filter(g=>{var n;return((n=g.meta)==null?void 0:n.hideInMenu)!==!0});const w=f(p.children,v+1);return w.length||v>1?(p.children=w,p):((m=p.meta)==null?void 0:m.hideInMenu)===!1?p:null}).filter(Boolean):null}return f(c,0)})}}function ht(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!Me(t)}const vt=T({emit:["collapse"],setup(){const t=L(),e=K(),i=ce(),{menuTree:s}=ft(),c=b({get(){return t.device==="desktop"?t.menuCollapse:!1},set(a){t.updateSettings({menuCollapse:a})}}),f=N([]),_=N([]);se(()=>t.appAsyncMenus,()=>{_.value=[e.currentRoute.value.name]});const v=a=>{if(it.test(a.path)){lt(a.path),_.value=[a.name];return}const{hideInMenu:m,activeMenu:g}=a.meta;if(i.name===a.name&&!m&&!g){_.value=[a.name];return}e.push({name:a.name})},F=a=>{const m=[];let g=!1;const n=(u,k,C)=>{var d;if(u.name===C){g=!0,m.push(...k,u.name);return}(d=u.children)!=null&&d.length&&u.children.forEach(D=>{n(D,[...k],C)})};return s.value.forEach(u=>{g||n(u,[u.name],a)}),m};Z(a=>{const{requiresAuth:m,activeMenu:g,hideInMenu:n}=a.meta;if(m&&(!n||g)){const u=F(g||a.name),k=new Set([...u,...f.value]);f.value=[...k],_.value=[g||u[u.length-1]]}},!0);const p=a=>{t.device==="desktop"&&t.updateSettings({menuCollapse:a})},w=()=>{function a(m,g=[]){return m&&m.forEach(n=>{var C;const u=(C=n==null?void 0:n.meta)!=null&&C.icon?()=>{var d;return Le(Be(`<${(d=n==null?void 0:n.meta)==null?void 0:d.icon}/>`))}:null,k=(n==null?void 0:n.children)&&(n==null?void 0:n.children.length)!==0?o(Te,{key:n==null?void 0:n.name},{default:()=>[a(n==null?void 0:n.children)],icon:u,title:()=>{var d;return((d=n==null?void 0:n.meta)==null?void 0:d.title)||""}}):o(ae,{key:n==null?void 0:n.name,onClick:()=>v(n)},{default:()=>{var d;return[((d=n==null?void 0:n.meta)==null?void 0:d.title)||""]},icon:u});g.push(k)}),g}return a(s.value)};return()=>{let a;return o(te,{collapsed:c.value,"onUpdate:collapsed":m=>c.value=m,"open-keys":f.value,"onUpdate:open-keys":m=>f.value=m,"show-collapse-button":t.device!=="mobile","auto-open":!1,"selected-keys":_.value,"auto-open-selected":!0,"level-indent":34,style:"height: 100%",accordion:!0,onCollapse:p},ht(a=w())?a:{default:()=>[a]})}}});const X=B(vt,[["__scopeId","data-v-99abea00"]]);const $=t=>(q("data-v-e7cd43bb"),t=t(),H(),t),mt={class:"tag-link"},bt=$(()=>y("span",null,"\u91CD\u65B0\u52A0\u8F7D",-1)),gt=$(()=>y("span",null,"\u5173\u95ED\u5F53\u524D\u6807\u7B7E\u9875",-1)),yt=$(()=>y("span",null,"\u5173\u95ED\u5DE6\u4FA7\u6807\u7B7E\u9875",-1)),kt=$(()=>y("span",null,"\u5173\u95ED\u53F3\u4FA7\u6807\u7B7E\u9875",-1)),xt=$(()=>y("span",null,"\u5173\u95ED\u5176\u5B83\u6807\u7B7E\u9875",-1)),Ct=$(()=>y("span",null,"\u5173\u95ED\u5168\u90E8\u6807\u7B7E\u9875",-1)),St=T({__name:"tab-item",props:{itemData:{type:Object,default(){return[]}},index:{type:Number,default:0}},setup(t){const e=t,i=K(),s=ce(),c=V(),f=n=>{i.push({...n})},_=b(()=>c.getTabList),v=b(()=>e.itemData.fullPath!==s.fullPath),F=b(()=>e.index===0),p=b(()=>[0,1].includes(e.index)),w=b(()=>e.index===_.value.length-1),a=(n,u)=>{if(c.deleteTag(u,n),e.itemData.fullPath===s.fullPath){const k=_.value[u-1];i.push({name:k.name})}},m=()=>_.value.findIndex(n=>n.fullPath===s.fullPath),g=async n=>{const{itemData:u,index:k}=e,C=[..._.value];if(n==="current")a(u,k);else if(n==="left"){const d=m();C.splice(1,e.index-1),c.freshTabList(C),d<k&&i.push({name:u.name})}else if(n==="right"){const d=m();C.splice(e.index+1),c.freshTabList(C),d>k&&i.push({name:u.name})}else if(n==="others"){const d=_.value.filter((D,R)=>R===0||R===e.index);c.freshTabList(d),i.push({name:u.name})}else n==="reload"?(c.deleteCache(u),await i.push({name:ye,params:{path:s.fullPath}}),c.addCache(u.name)):(c.resetTabList(),i.push({name:ke}))};return(n,u)=>{const k=S("icon-close"),C=S("icon-refresh"),d=ne,D=S("icon-to-left"),R=S("icon-to-right"),O=S("icon-swap"),I=S("icon-folder-delete"),U=oe;return h(),x(U,{trigger:"contextMenu","popup-max-height":!1,onSelect:g},{content:r(()=>[o(d,{disabled:l(v),value:"reload"},{default:r(()=>[o(C),bt]),_:1},8,["disabled","value"]),o(d,{class:"sperate-line",disabled:l(F),value:"current"},{default:r(()=>[o(k),gt]),_:1},8,["disabled","value"]),o(d,{disabled:l(p),value:"left"},{default:r(()=>[o(D),yt]),_:1},8,["disabled","value"]),o(d,{class:"sperate-line",disabled:l(w),value:"right"},{default:r(()=>[o(R),kt]),_:1},8,["disabled","value"]),o(d,{value:"others"},{default:r(()=>[o(O),xt]),_:1},8,["value"]),o(d,{value:"all"},{default:r(()=>[o(I),Ct]),_:1},8,["value"])]),default:r(()=>[y("span",{class:ue(["arco-tag arco-tag-size-medium arco-tag-checked",{"link-activated":t.itemData.fullPath===n.$route.fullPath}]),onClick:u[1]||(u[1]=()=>f(t.itemData))},[y("span",mt,W(t.itemData.title),1),y("span",{class:"arco-icon-hover arco-tag-icon-hover arco-icon-hover-size-medium arco-tag-close-btn",onClick:u[0]||(u[0]=$e(()=>a(t.itemData,t.index),["stop"]))},[o(k)])],2)]),_:1})}}});const wt=B(St,[["__scopeId","data-v-e7cd43bb"]]),Ft=t=>(q("data-v-a3f5c329"),t=t(),H(),t),Dt={class:"tab-bar-container"},Et={class:"tab-bar-box"},Mt={class:"tab-bar-scroll"},Lt={class:"tags-wrap"},Bt=Ft(()=>y("div",{class:"tag-bar-operation"},null,-1)),Tt=T({__name:"index",setup(t){const e=L(),i=V(),s=N(),c=b(()=>i.getTabList),f=b(()=>e.navbar?60:0);return se(()=>e.navbar,()=>{s.value.updatePosition()}),Z(_=>{!_.meta.noAffix&&!c.value.some(v=>v.fullPath===_.fullPath)&&i.updateTabList(_)},!0),Re(()=>{xe()}),(_,v)=>{const F=Ie;return h(),E("div",Dt,[o(F,{ref_key:"affixRef",ref:s,"offset-top":l(f)},{default:r(()=>[y("div",Et,[y("div",Mt,[y("div",Lt,[(h(!0),E(Q,null,ee(l(c),(p,w)=>(h(),x(wt,{key:p.fullPath,index:w,"item-data":p},null,8,["index","item-data"]))),128))])]),Bt])]),_:1},8,["offset-top"])])}}});const $t=B(Tt,[["__scopeId","data-v-a3f5c329"]]);function Rt(t,e,i,s=!1){t.addEventListener&&typeof t.addEventListener=="function"&&t.addEventListener(e,i,s)}function It(t,e,i,s=!1){t.removeEventListener&&typeof t.removeEventListener=="function"&&t.removeEventListener(e,i,s)}const At=992;function Pt(){return document.body.getBoundingClientRect().width-1<At}function zt(t){const e=L();function i(){if(!document.hidden){const c=Pt();e.toggleDevice(c?"mobile":"desktop"),e.toggleMenu(c)}}const s=Ye(i,100);Ae(()=>{t&&s()}),Pe(()=>{Rt(window,"resize",s)}),ze(()=>{It(window,"resize",s)})}const Nt=T({__name:"page-layout",setup(t){const e=V(),i=b(()=>e.getCacheList);return(s,c)=>{const f=S("router-view");return h(),x(f,null,{default:r(({Component:_,route:v})=>[o(Ke,{name:"fade-transverse",mode:"out-in"},{default:r(()=>[v.meta.ignoreCache?(h(),x(G(_),{key:v.fullPath})):(h(),x(Ne,{key:1,include:l(i)},[(h(),x(G(_),{key:v.fullPath}))],1032,["include"]))]),_:2},1024)]),_:1})}}});const Kt=B(Nt,[["__scopeId","data-v-6b41f291"]]),Ot={key:0,class:"layout-navbar"},Ut={class:"menu-wrapper"},jt=T({__name:"default-layout",setup(t){const e=L();zt(!0);const i="60px",s=b(()=>e.navbar),c=b(()=>e.menu),f=b(()=>e.hideMenu),_=b(()=>e.footer),v=b(()=>e.menuCollapse?48:e.menuWidth),F=b(()=>e.menuCollapse),p=b(()=>{const g=c.value&&!f.value?{paddingLeft:`${v.value}px`}:{},n=s.value?{paddingTop:i}:{};return{...g,...n}}),w=g=>{e.updateSettings({menuCollapse:g})},a=N(!1),m=()=>{a.value=!1};return He("toggleDrawerMenu",()=>{a.value=!a.value}),(g,n)=>{const u=je,k=We,C=Ve,d=qe;return h(),x(d,{class:ue(["layout",{mobile:l(e).hideMenu}])},{default:r(()=>[l(s)?(h(),E("div",Ot,[o(rt)])):M("",!0),o(d,null,{default:r(()=>[o(d,null,{default:r(()=>[l(c)?Oe((h(),x(u,{key:0,class:"layout-sider",breakpoint:"xl",collapsed:l(F),collapsible:!0,width:l(v),style:z({paddingTop:l(s)?"60px":""}),"hide-trigger":!0,onCollapse:w},{default:r(()=>[y("div",Ut,[o(X)])]),_:1},8,["collapsed","width","style"])),[[Ue,!l(f)]]):M("",!0),l(f)?(h(),x(k,{key:1,visible:a.value,placement:"left",footer:!1,"mask-closable":"",closable:!1,onCancel:m},{default:r(()=>[o(X)]),_:1},8,["visible"])):M("",!0),o(d,{class:"layout-content",style:z(l(p))},{default:r(()=>[l(e).tabBar?(h(),x($t,{key:0})):M("",!0),o(C,null,{default:r(()=>[o(Kt)]),_:1}),l(_)?(h(),x(Ce,{key:1})):M("",!0)]),_:1},8,["style"])]),_:1})]),_:1})]),_:1},8,["class"])}}});const Xt=B(jt,[["__scopeId","data-v-6b52f443"]]);export{Xt as default};
